language: node_js
services:
- redis-server
- postgresql
node_js:
- '8'
before_script:
- npm install
- psql -c "CREATE DATABASE docnow" -U postgres
- psql -c "CREATE USER docnow WITH PASSWORD 'docnow'"  -U postgres
- psql -c "GRANT ALL PRIVILEGES ON DATABASE docnow TO docnow" -U postgres
script:
- npm run test
- npm run build
notifications:
  slack:
    secure: ZvOm+v6CpK429zTcXhIJWFwrpE8q4rd5UTOdl9K3Adk+zcwS1HDlbEeBFA0k/Bx/AK8HYpaIRkmzuXgDtO4aa1p4mGDntSyBZ+Wc6h+BZZ/OAjpwTObpzcf85RZIF/DfxICHYgql314jUFvDB+rOea+DVVPUJwOXy8u0b7awhz/YhE3ApI6e0lW3swsn+Fpl/6v0h8PFwnrg9J292spgh5dYL1OpilPIHQckmD53SDgLPL9+dgtcWKiBqmhV5B1hsxGoM82vnBcHHfSY23edUDIFLE0d0u6W4HtH66ACrjtntrNh0Q/5vD0zrzP2GFhVgYzvKzpL05het9CFK2EHrxJj7voYWzyzEWL/jlEgyJNcRBLD0lEV5yfPO7esXBTGUPF6fORnv1BE3/5T+vdrn84UUmQIUfbl/IiwYZlzrH0jpDbNa/hUuMbDSks4OYjskcbugjLjpeawDKwSwx1CGL+hZyofl8QORVHLJLFHXnfCwtl+Mtj+eHpqTzXRd4FNurbO9aa7Y+KwRaMTIHq09c8ra1R3oCYWV+t6ZhbvtsOmr/NX4LPXrvPc1kda8Lll/BMMtIoByAg6YQU1QKo0K+OaqGRunE9DP2bf1zVF5VWeMa71WTYjRzRdjmsijTwysIPtZ3fe2w9wkyLUTgItQUJkmIVngDrRA1YCeaYLJe4=
env:
  global:
  - DB_HOSTNAME: localhost
  - DB_DATABASE: docnow
  - DB_USERNAME: docnow
  - DB_PASSWORD: docnow
  - secure: yy+XLFGwakPxnU1XWeCwGCt/9Wvk9v5rrYfpj2X3X0rg/VjLJIRJeskENf78jQnM6qD9KkohV2Kok9NScy6JG1iNX6wfnT7YWM37WDBdqSUgxo71tyig4WIlU/STaXQiBxU8TDqZfUyo6U/wqZlXZ0RCClYiz8gQG9VyXa03NSE288dZaCFq7BnmpaJ9ZwdDGXTsyIgxqPL8LCYeMcpsarQuCvLgwIMuPIddBNM9v5TRKDGLEhl6WGPoIA4AY+9AMOEoo7FaoFyr/LUGAAwMooGVlNieIUck0loGhMrQBZEv9TYpvUuPhJZohHuScWwvCJVg1cCs1b56QPtre5HnvfLXGEtGT2AA0Y4o/74AGNuo9eIE2XoWkLtJzcaYx5eBAA+DEJYOQ7PiKL+kKWclXjK9V3+W61am9js1OXKCa7CY095svJTF3E/9xlMrWMHk6H7c+tBnGazpbR/w9lfLCwET6kzLA1iazxckZv1Mb3n9KeT4Gqpbq8ygBbzXz2fVlIYFN30PrBws5TohfRT9dhel4kiOvDRlB8xFa2nN+G4twaM7tegpveASp+YxjTmqfHPs6zcV751W2CbH2NX3mYNnux/GEP6t6EI/BWjP9Q0hT5LjFcbe9G2eN2XsloxDoiqSfKytr8n3bRqmQCv3pNEkrVzx8k2ot72PcjRnhnQ=
  - secure: JYXgOB7/XcaoqksNI7agr59MFcNvi/KBR78TufZUEPSfOKwOuDQWfyPu0oRIbbL/sCJgQTPPI6hBUuBqW+6usBm2KNLulJUuuyax7BY6nhwGg7Zu0DKDMTl1GYuc3bmMX0aAhgDx9X1wBH35OqZP8tb+wrBQpB0aqKY1GyQ+hoje0zUNejuG21XiskcLOcbTcSpj/yYRFe0MG1E1w8oHmgl3GcCBNGWUYOEfPwBrwASQdW0Ncq+QjXolq6wTYORn1URTlBHXg9NtcStiLRLrXozV1DnLqnGXsHMBkJ6PNs1WBF/FZKXz+tLdbCgZ8SBE9MWp333kTFcM9k1qojmy3cGWsr4dAQ7Mks9kEj9usnTDqzAfYAKndi53MjaMO46BKrLwnIHVEF0dW9ydFaUZMgKV4UXg5wbKMKac7cIxKv3vMNzNjRroQF/w2FEHQnYpcUXZpxBv4ZP8wS+8BsuH/XK3GOLcvXaif5gUqGLNqclBFO11gVtGUGgsW5sJ2DRSv7koA54QW13lcna57rKD1by45VFBN8teYNRZT8OWj7taFyGTqb0XcOmpQ63D0x4/oR9RGxktmUfHThCQMwRphzAqLfvq/GXf9kPQLO/K+8a1gM2wsBGV1YWfO56sSIGdd6MeUwC8ff562rIvrNI8HSgXXooi4U2wGiKO7ee3T3o=
  - secure: nSFggwSGIS9OGvCLoS4KEIhJ37WqTzxoRJaCSUCXXT0Vxa7115sBS/7miPO/HgBByIdWDIrpsupv/EcwEIfmns5rCEINgBimV8hl06+KCoN5xoOmDIppKGbMElf8LwpUwVqXgV/ntuhTdiNUr+I2WWVBQNMwpsZxEHWQtjT2cn+/QA1N+yuKzAL2ZQnjXfyl84Cbn73o3nLv726rf4IUXhk0kTXJLQG4aLkK/dZGp+crE74Oa0oNo1Oy+T0fzuv+5909MSMdb4VMlKwpksFj0zNbvJC6S2r3Z2b7k6j4ZUAQ8e7/OAukzekIy+jcB3MdaK0EZgCNxJFMwCL7tDisEyXFjGxBJCk5HL5WnyxGIYj7E3GvbdtrlSsIejI2h2lmI7u28M5gslFJtSEfar0Y/sh5XPqAU3PzJlPzyd3jPIkG2R+pdm+aYFCzJC+vy4KzBFWVH8MsUM/1CKG4ekVNeACtJsNdO769Wal55P3uRlbEwBGJv5N4I+IQihkd5mQGALtfkNVVLJiHFuBfnEwLxWNFWLux1a7qgS+3vH+3W0fU6AaIyvqRyvh8LWrGXRYBjpb+hYbjWXzlLxgGAup9UjfrCylDJ9uzFjVuCtH5+f/nml3FeynualFnITKcUIX9hPbp5R8mNr4PjdQWc5dcyi0pbJmHpcdwNRxQ5PEih7Y=
  - secure: P0IvzSMQI5mUaLmeXNSohsaf+LzebtJZku90J6NGSSdTLcx1dtb3aLERFAYQI1Pvtln3WDmWUNGmPDfNCtawHtjTKbze1v94EgVGwEKKHZvlBhavMQDUc7W0/z6lZ1+QP67CYyyerFuc7W/WH9csgWUhrfUpjXZfx/tB7p83pfirYVBTpn1SLXbCNIHtA78R3L2v2PUtdDvX/4bFfoo+F+rqTB8ncqeCenGCHiOfdsnVtQnV2VxKUfyrG8YFlNOkPNsG+CooNbtwlGdxt8ONoNHN4swHZtsrN77XikWPr5V4h7m5ceXrzAOWdZK//zZOlFn8RA5rxaONcAqPHf1gUpmb3vcyxcVPoEAPELXal7nqu3Qrr0WHMftpTVfvrVMKdvcPGpSeE+TkaKGyLyGaE2c5BQ0Zd/fuQvioJAulSFB2E9RGmR1FkKp4x6O/aX9Izo5wsKrL9dPg7Oza2okxYSUzgruAWlrl5aZyqQqgp4w+LZqbnY44cDBOR32W0x0qbNmduXR8oeKo1bOvqEvFu/Fy3ToNRJ7ZfiJjo2BRbw5MJoxvvpvNiGRebD8Z96CFn7vgu3MUoGyhFMKErVLWIvpz3vX5HYkDV268Lmhm+iaco9IQIHzVQFTWpATC82MoOM/ywM2S+V34c+7bilYImVLO16YuXQFH42CthdEFcsQ=
