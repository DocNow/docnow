language: node_js
services:
- redis-server
- postgresql
node_js:
- '8'
before_script:
- npm install
- psql -c "CREATE DATABASE docnow" -U postgres
- psql -c "CREATE USER docnow WITH PASSWORD 'docnow'"  -U postgres
- psql -c "GRANT ALL PRIVILEGES ON DATABASE docnow TO docnow" -U postgres
script:
- npm run test
- npm run build
notifications:
  slack:
    secure: ZvOm+v6CpK429zTcXhIJWFwrpE8q4rd5UTOdl9K3Adk+zcwS1HDlbEeBFA0k/Bx/AK8HYpaIRkmzuXgDtO4aa1p4mGDntSyBZ+Wc6h+BZZ/OAjpwTObpzcf85RZIF/DfxICHYgql314jUFvDB+rOea+DVVPUJwOXy8u0b7awhz/YhE3ApI6e0lW3swsn+Fpl/6v0h8PFwnrg9J292spgh5dYL1OpilPIHQckmD53SDgLPL9+dgtcWKiBqmhV5B1hsxGoM82vnBcHHfSY23edUDIFLE0d0u6W4HtH66ACrjtntrNh0Q/5vD0zrzP2GFhVgYzvKzpL05het9CFK2EHrxJj7voYWzyzEWL/jlEgyJNcRBLD0lEV5yfPO7esXBTGUPF6fORnv1BE3/5T+vdrn84UUmQIUfbl/IiwYZlzrH0jpDbNa/hUuMbDSks4OYjskcbugjLjpeawDKwSwx1CGL+hZyofl8QORVHLJLFHXnfCwtl+Mtj+eHpqTzXRd4FNurbO9aa7Y+KwRaMTIHq09c8ra1R3oCYWV+t6ZhbvtsOmr/NX4LPXrvPc1kda8Lll/BMMtIoByAg6YQU1QKo0K+OaqGRunE9DP2bf1zVF5VWeMa71WTYjRzRdjmsijTwysIPtZ3fe2w9wkyLUTgItQUJkmIVngDrRA1YCeaYLJe4=
env:
  global:
  - DB_HOSTNAME: localhost
  - DB_DATABASE: docnow
  - DB_USERNAME: docnow
  - DB_PASSWORD: docnow
  - secure: bZml3SDvNQ1d08gW2e3gO6Pj4019YouYm/wTikll3QxU9S4Illm07Kz7xcJ2uhqbb83oer+n7YpEC3YCeNHj39TAyonLN7HOiRzrHPHLwThrSXRo366ECz6nRTd8/sw7J0BTERCKCjN9SZ18fYNy9L/f3bJePAMx7zXDkvYQ4Rz34YfEqmygqgyTIZdQ3pimmgPk5lV9iTqmahnxrm4GuFMntF7+a/RRafC5Hj0zeitm7zPMxUwt/HpFnF4WDrWgA/hAGm7ZeqxPmEeO4TU5XczepEcVHa4jm2ljMsPh1ktKsMrvIKvCmZIyJZ7/zz/UpKRqWt+RlnVY/BOflE2IzCle+sYoGoLS5doFhbrzZAE6YGEWNNj57iIRjx8/CjmGApc6FNz/zFRxMCMXDzgXgb6oqUZMgBJDLqChLnUGDV7Z87UKrFqUvjeL8AOX+LIr00lyNFYwUetBgINCvbHlPq4robV1+8HyOlD/L2qAXZUMngu3sOiaG5e9SIiIRs6lea+xeRvE9gY3vR8uIaPaNSgudVI4914uPF6Kmh+9er+bcA5ZVSDv4ae2VLQUwv2BRGtcoI0AMyol9nJ9OYZlKaumtml8FCAQHC3OZr9fxjYYzwMVdq6JRuxjdlrr8zY06R/2WDtNiU5HaP2EUSxUnRoz1UOlln1iaAnVuOmcrLQ=
  - secure: GCKenK1Rc/cBcq6WpWAPeqHDhYcDf/wstteLCGFQyzB9nVjQUl6y0L3BVNUKiYRNgiGVINtJV4qfzH7p8xHD7vtOryNgsrin/1y9RsHgBhYIXRju/aoEDcukRJo6AfnvxswFhWPFwl8iUa9fK5WSUt7RCMvBZmuk+m+d0A6bj5fzQi45q1skaG1GKnyGIQlNN3dEpv8ZRY8czFbZ1vJWGOBmM2UZWA6hsQcE7Or8HCDXYOrDxyt/Q+T5p1zeCHJ9f/KLRLs2VUsu0HQXJRj5SvsYwlPvwXnwQoqD+umHOTZAZ4ESNWfocxPWdp/a7BA+FAAcwguuQ47Is3vl4Cu7ZzJzzEP0dQluJP9bcKN7qF20lgT5kH+pP6dVy9f8Lc1DdSpmgJI6HU5m0DI6SLkqsx7NVEdES84BppPGwjS49PDJ0vYS+inGddXNHm1KfnxFns9CcOInIbnHRccj1r4tIXADY49dIbcFEQoJTFpPmRfeLVdLzfVYWbV1deDMz5IWcSoJ/uowrBS6XhJayYEo8pJuaa/xeBx7BUCrgDCHi9EMxD0Re+iwT0np9Mtu5NpOOB0gvL5JpoqWnb/TEph8vAFPa9Wz4A01OEaF/qRMwE96EqubGp+iyIObxamT8d5ZwWfPvmeYxEAUq1g9Hrp0wAMrfU6lggP7lSbpeQ+SP/0=
  - secure: RhpYOgZlYhrHqexni9g9e7nIvLaoImmyLHYfhIWlEAHdXw90wdq7X2kHmzDiK6BWHlW38Z71ZWFCOV3dL46hSVuoglRDWm1PA9lihz0AyNUPSTwaBajPYFTZjURsmpncyx5Yrat5X6cAqEHtCA9F238ZIvHAaYXgK/0dSrIN4dJFYzrVaa7F8BSOzwyNIdxeDf3vDlrxmVHbcMtSnAYo5t0sUynHYgDLIgPiO2cnyRhZlatjIPuQfy7nXulusvsLIS/yHU/NhEEzBbkk0iOzY8XmmaC3IPagsnEuAPdYPLTdYIDbQjJXOeJvyIcsBOjxqM5EpR9Sin0I3x79Pb0mEE7UwS9lpR00+ILjjtUOsoizT28pRG3dZe9dHqOnRJouUxrzb/fxJ8Zj6B030ZLSvhWUxHzZyIYJadN9tu37esFhYb7uOnTSJoTfGXtA5aBcKhHLAhEdVLbAkuzSCHCE0wZC5ZfvD53tBkSvhLmHLL8ILuJCEre1GtTBUDTL0njEvb5HBxkLq8m6NJ3uhmfxnzvRMgGVgGqzrMw3IoGVwKWUDw6JNxmPu0NdlRdVH3hvpv7nOBJALSyoGxnuBN1KAwac1cS/FUL3KBc8NLAscWX2HVZH4yqPM+X3k577o6H5SFJbYlXaH6VXuBykGOo1X2vrhYBI3BoiRIDwWpPjl7Q=
  - secure: jE3AT20QebOYqZgTfA6D1cyGIJDyCjE0zjc33tj2ygtG8jQyOJkiVRQJi/yDFdialUStQlqt6A92WvyvzFnCodVOnYWf9kTqStU3ZQDZkMnwFW81rj1TOx9snPTtElzFDpW3wLvQWrUSWBOqldmRs6C8tBWP44z/QH3g9XWhwjA+J4//iOmF4bBwx7xu5+VgWCOVxPX/5owqutGp6yaRidgScvM6t7x6KATnUDPrucYFVHLq+hGsXDWuAV3gjTy3zlUNwbc0HBmaiVQmddccTv1HPAmyCR1iMhsFxNSV/E9t8KCMPtprorJYwKSNnIbdeIAtErNvM9w+iYvZNwfIRLUM01bvXhTKzXHkcFMwwx7kpwLY45urxlg7gMpqKhjKRAccWs54s25zBiUYL4jGcjiFbMWGzIwIe1LplN1dl8pK1BUj8mQrA4g2cbvLSWXmvHfsVABQSLphi+COW9sahxcW4uT7yfgEvoz/sijfylSl2d8hFBVlffzWEQ2Y6M7TCJO+8kd4FbrQZC4vrgeY7O3i0q39JclFApSctcCN+tzP7dR7Fl96fXbzK3flkDiYqJLzkO5vtbyeisEsKDn/q9rELeKKRIyHgTk0/qZoZG6N07FJer0ZS7C/dJKF9e0gN9IWoBebf3khlXtNs2xaGeHVdx2YXJt4HCK8CEf4pq0=
