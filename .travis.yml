language: node_js
services:
- redis-server
- postgresql
node_js:
- '8'
before_script:
- npm install
- psql -c "CREATE DATABASE docnow" -U postgres
- psql -c "CREATE USER docnow WITH PASSWORD 'docnow'"  -U postgres
- psql -c "GRANT ALL PRIVILEGES ON DATABASE docnow TO docnow" -U postgres
script:
- npm run test
- npm run build
notifications:
  slack:
    secure: ZvOm+v6CpK429zTcXhIJWFwrpE8q4rd5UTOdl9K3Adk+zcwS1HDlbEeBFA0k/Bx/AK8HYpaIRkmzuXgDtO4aa1p4mGDntSyBZ+Wc6h+BZZ/OAjpwTObpzcf85RZIF/DfxICHYgql314jUFvDB+rOea+DVVPUJwOXy8u0b7awhz/YhE3ApI6e0lW3swsn+Fpl/6v0h8PFwnrg9J292spgh5dYL1OpilPIHQckmD53SDgLPL9+dgtcWKiBqmhV5B1hsxGoM82vnBcHHfSY23edUDIFLE0d0u6W4HtH66ACrjtntrNh0Q/5vD0zrzP2GFhVgYzvKzpL05het9CFK2EHrxJj7voYWzyzEWL/jlEgyJNcRBLD0lEV5yfPO7esXBTGUPF6fORnv1BE3/5T+vdrn84UUmQIUfbl/IiwYZlzrH0jpDbNa/hUuMbDSks4OYjskcbugjLjpeawDKwSwx1CGL+hZyofl8QORVHLJLFHXnfCwtl+Mtj+eHpqTzXRd4FNurbO9aa7Y+KwRaMTIHq09c8ra1R3oCYWV+t6ZhbvtsOmr/NX4LPXrvPc1kda8Lll/BMMtIoByAg6YQU1QKo0K+OaqGRunE9DP2bf1zVF5VWeMa71WTYjRzRdjmsijTwysIPtZ3fe2w9wkyLUTgItQUJkmIVngDrRA1YCeaYLJe4=
env:
  global:
  - DB_HOSTNAME: localhost
  - DB_DATABASE: docnow
  - DB_USERNAME: docnow
  - DB_PASSWORD: docnow
  - secure: q6qWUrrVdLt8C5IHPbR3CuTybUKOxehi+2GH6aCumZYr+WMSOF6X8HDuJQzVoh0X2Dq9lJ2MqVXBxLb/L9xwk/+r1NHuNB6r+BkZc8zqdq8GIqyisDfUC0v+hrvUY7fHbfzrMyI3/iIAZNL0zBYi947esO2qNxIbZA+21hTRDfD7jAiALpNj1Ob+LfZJmI6FQRT0fHbT9K9C9+GEJ3Jnis9QJQxeAo/jDSirqFZ5d+PVqCy7AHrEHQrXk77vohQ3Z1vs+EiiaUIYJDIfWbjJxhYtvPMDa83vjD4MDj8Yt4ZGxozUKQFSq15sky7BSnJcZCNPYp3+tt1Wl/xLBcqzOXaaY0N4U9mH1g8124kUcPm6dpA9Z47+oHnkaiRAnCTGcXbnj0KqI9KCdBquMdCZFaY0/KDF3lBGNeAaiqX9YAKve/+NffaHwMU9VBYzoxvDqiqR89cjR24YYrSMmi4cHb/0tjD6SpaZUs3v+w7kJNgc2dwb5HLrAQNa/st74VF9Ghe3jRovMhB8R7UHm+ATzdcob/izB3UBL8ONu86i4q6PNuLkwzCbCqeRxyLpHw/LgueaM7D/aZ50sVJkxNp4sMBTCIUSBXfDv19jIWDu0e4r8R4M/5qvM8Wx64EL9vbxNmH4CgWONg/d9R3yVzbU4Ou0C6aHvwSWKHcY57HkfZU=
  - secure: HJnZMZobt9FTlnNq7vTwfTEStNbELE2zRLFkVrOFhHVi3/53Nyv0J1PoPd5duSTYgEK012CSKsuhIV5v6H7ZzbINOoIn3WFk8CuSY7lZF36nb9Xw3niQWnxTqH92BkDmw5gUY6NblDW1nTfH3Vo4L3mjny9Gus/h0ZkS6Wg0euVPtO9LS41Njgc9Qbet9lfq2zeVUx1Vx4qhNeTPmSnQxC8AxwQu7EXsBUt6ugMxFqV7nhlHzG6qEHTz8Uzn3ipsCwOt+ogBMrRk0PzsJytKX2CQ/7/C7G/EJnm2dImCrY5qVgI+qnJljCJes/b+IeIqq5xzpRXK4Q5bq+ObsWP3s8VGMQNEMWNKIILt5Q/m9PGh62TzSH3Bf09HyamSWG+MviMRW2Sdzpz35Ty8N0d02GCTdQt3juwWS2hKLbuJ2/cnM4m5UT/Ua0Ji2hkVXDw9NW9ks9Kkp5p5QRW/ca9UBiEHOlLRCLPItdblUDwbrLSS49jRdwbTx0ooAmAhnaTov3tnuqlHXSlpPNFNsNihb+cQCXty5yMk0Kc3EdlEx6bDUoS23FXeB0jY1KMaEOW7t2GjnFtb+95KTodSjZzbsyPIjw9WJ1ok55v45WskqkJwR7ntXo/B2Q14GtMNlwXhlFPp3hX5Y7pQtt7GleWs0IVdyLYcYOHD5/UaOl6FT3M=
  - secure: LvUoP5AurgDrhy4Tt1VVc9bV46NGLeolRF+bsZ5+dyOhyObFC4RhmTbBIA22lXv+cQi9yR8gclDeno0Ae7f49HO+4XjRCCGvuhP5kHptLEY2y11uEAOmc4ISlc2MJOh+KsMKjwH6Fy7BWIGfuVdOd1Aycz64ovfofwJ6Qqq7pAGJL/60a9WjmeqzQbJ3GeCi9xOPe4ao/PgVtuWFRc+eSkoI/WIPstFWonBJSFuJX+qaUWkM6TheK5RIT7YyKdHkfrap3Zztbsh+Qa/7yCXKCKKbqce3wnyqxH3h5zgcx5hoR1KghzyGmbGpav9AfeXrK9ub/t0tU2CN/pkKE8yLl5EViI9D5QUt95C3JqLD4GsUghsIXoNK58k7ul8GPB5LznSiD9c+rXkpUS+44AolKcE+pQ8iIZDIm76GROGJ9W3r+/m6MD+fvB3K7i25tZTr/uswnp/O2Fa0n21IzZeLumEF3pm00s+hZ02etc5/4kDAkBOU3nUTC8jo32lQMPahkPH5QrG88vgufNXNgGnVorbzKnQA73t2/5sQwWctIfIb23oGMh1reR2BftpvCXU79Z1pZ0OlgykjQgC05EFt+q9GjxJoJ6cBO0rKMFOLNNs7I5cGkv5vrclH+DXN/nJEVQdg4hvlEK6sTfNPEXPmsxOWFp6RMbxCnvk0e5E0PPs=
  - secure: rWxJHdQsY5uo3jUCktGdM9brc9nncbQ+q7SMsp5+cJ7AOwT6Ie0cJGhXWRFhUc+2zOXUuR3hWViWCE6JpRZeBrzHJhkn9vkYwO/hIEy9sTUgDRSr1HB4jOxof57eOUDbM3yjf4XJFSPeQiXCUddnrbCE2QNXxh8wvmNzfm95Bcv88vCEUHd7Kf4GbnlVt0ceEuef33IKFUG/izoeJzAoJqA8YQSUth7UMnsnwOnfKLomV0bCE/MLhQWs7SatNfIVyBYBEYHCGkcD+/u24yluJytXDBrlzyGixM0YvDbMRZp5/NlKJKvk0+udpjDjQ1N6cU7YyMbhzLOJ4FP3arMpU08DAIL6WAxBDKeWyjsj0Q6nXqqyUeGnB10Qge2auyuKqaBVBiBNDn2xb125PHVq0+OF+zWeuGBlzPT0PBp4KpbYRfVNjtucIU3Kgy9kwTQswuIW6S1uEG+p2GBsFZjKW2LFG5Vg2NmJboNzyP+DL/2Vc0RnGfW2CWmxl25UZNGK/jddv/aUQontjo0b4xsVw19QMz7iDkoU8WvLG/zO+wxKp16dENuqM7Nk7bmu4sZMPB2mNlWl3Lbn3Wk3z+8d2baIAXXkQeZICgkonxwcE9n6l9u2QwuchiTbgCY88gM9R0DVmBP/bXisSO2Ey8pBlbVRrr1hbEmSBTcZblGnodk=
