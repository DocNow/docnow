language: node_js
services:
- redis-server
- postgresql
node_js:
- '8'
before_script:
- npm install
- psql -c "CREATE DATABASE docnow" -U postgres
- psql -c "CREATE USER docnow WITH PASSWORD 'docnow'"  -U postgres
- psql -c "GRANT ALL PRIVILEGES ON DATABASE docnow TO docnow" -U postgres
script:
- npm run test
- npm run build
notifications:
  slack:
    secure: ZvOm+v6CpK429zTcXhIJWFwrpE8q4rd5UTOdl9K3Adk+zcwS1HDlbEeBFA0k/Bx/AK8HYpaIRkmzuXgDtO4aa1p4mGDntSyBZ+Wc6h+BZZ/OAjpwTObpzcf85RZIF/DfxICHYgql314jUFvDB+rOea+DVVPUJwOXy8u0b7awhz/YhE3ApI6e0lW3swsn+Fpl/6v0h8PFwnrg9J292spgh5dYL1OpilPIHQckmD53SDgLPL9+dgtcWKiBqmhV5B1hsxGoM82vnBcHHfSY23edUDIFLE0d0u6W4HtH66ACrjtntrNh0Q/5vD0zrzP2GFhVgYzvKzpL05het9CFK2EHrxJj7voYWzyzEWL/jlEgyJNcRBLD0lEV5yfPO7esXBTGUPF6fORnv1BE3/5T+vdrn84UUmQIUfbl/IiwYZlzrH0jpDbNa/hUuMbDSks4OYjskcbugjLjpeawDKwSwx1CGL+hZyofl8QORVHLJLFHXnfCwtl+Mtj+eHpqTzXRd4FNurbO9aa7Y+KwRaMTIHq09c8ra1R3oCYWV+t6ZhbvtsOmr/NX4LPXrvPc1kda8Lll/BMMtIoByAg6YQU1QKo0K+OaqGRunE9DP2bf1zVF5VWeMa71WTYjRzRdjmsijTwysIPtZ3fe2w9wkyLUTgItQUJkmIVngDrRA1YCeaYLJe4=
env:
  global:
  - DB_HOSTNAME: localhost
  - DB_DATABASE: docnow
  - DB_USERNAME: docnow
  - DB_PASSWORD: docnow
  - secure: FQNyqPaXWsAjyFNcuvnBXTFHR7nhYTDX+6mVp23Ek4l5wrauYtBBrsSNsnAae+P+N5BsY5SN86UxEtXqRqBGCkE+Q/AWQRMartsVfnKit+ecl+7W2Qe6+YJHfk0oid8AyVgqjmGkElNyt0FtdKMLeaWsuKfDXvLPpuf0uBIo6z1Mb4OVFssMawZGSCTf4/nMUt4EDheDQ95g0GPmI6qLC/PV12E1sbgInrDVAC1oLo6uKiBan+TNg0zrIMZxphqEYpsjM1fd7GHpa8Shc6mX4SF/1rRG6+tK/LaToeN/2k84y030kxh2c/r70rGqLRzHhvclOs5F9EIFFN4OQVujC+SaycwXGH/ouQQt01jifSOtgtmplXQhVcZN9GxQx6903f4Gz3tOhbCeghJJt4BuBb6vOXr3G20FNsS3q3qE6mesapojESPI3K/HzGoLSs7BF6ZtITkQK0J1UkyqCjITNX5c5X+nteZ1he3o3S/kD6WaY6DhB8vWZS9K2puGleJfWU1JBu//f+UDM5fa9woH8WJh3Mny5Hdu/ONyDUGhN5l5YLbodMdv0lrr2ylb+0+mDlwu+U1yLq49XhrfpebYIPR51S7I7GFULpnv79crTcNHUyQetBsDEmnoXux6uP2myhGVbX7+Ttsbz+iYlGfruZ7ZdAVDo2lGmVx3/zaYDdQ=
  - secure: Nx4nix5H/QT+iD4CmrNVVSGe2Xdfr1a/jgA/+ZExPwyT4t1VyOvBPinq2hpIfWfYaLhLCqUpQnrbOObttXtKdGin5maFibaNZDfxWFQUWSJU1FbsAddumBB6nqQ8xkukYcjsz5Xciwc5sjyojU29DiDHEznazbuDikWmI9WPgOmHdpDK1tml3AVtnQBvagM/VbX968h7z67NEXL5Fy6qiQTybaoRJAkiatH9NbfLYKxNKj9j/Bamt5TdAD4LpjQBRzxnME+LyS93dM6Pr3nigRHSQ0QTKhoob/4t6kKnsJTVbGK8TcMF44vBYKsA+Ga2jAGAoKVf/ncay5q6PdoAsfnAPjkEDBu6E2q/EbtnONN9JpM3gbVL/H/Qe83GcJb1HXKT7otOwYmCUuTXxdabiHhnBqSdmklI++xzsmRcyqaG0ocHE9i1VfCPJYymSSYCA/7jkvuVqyipXi6J+0jV45owNZmsd4+UZRYlFKwDzrxSkI3uD+QYI9ymtEXDLHx1Hcx8JaLz1S3Vy9bK9iKbp4GCi9lWgCs7RZUgJYWao3hGZzyZz8FX/fZB5FyjGFLMCGCyfx0SiYIK14fNPhbPnlFwi3kIOVO24lhq0y+ek4DlfGnnX6oBT4QqyJrIhTRpTi2p3Z/pRLK0wZ3tnVBxSTjkI48lOQwXFcqDCH8NyDs=
  - secure: M7HOA0VHIz9AmKcXq6NWnjOVeE5r+goAjDwqtY4hBzMc9WR59Yiak/iIezMzLgSn8rXfR8wrzEi3A8aQAGd+uuYe/gqcUdPBCitA4qrlH6pRwxIqAdcJ1HhNL4mKWtNoxavJjMM38AxibXO4rAO/6JjMUcbJSx1lbo7HFAtkZdWZacs7llDNcQn7iBpEjp4F3Us3p/nCq1vlmNltGulePu3YuSABMZus67JUIp1jbsFWXhhf/V18i0yaisCktD/jlvCE8GwTbnrjPZIPaHrIxEWCexcD3UJE/yBsMbDkuqsPoOM7KoTRZahbDHwrIiPb9qDV2/sXdjADKC9sKGpP2cQeLl7RArTV3Gd+bXrcTzg8/HECQlbBEfFLIO5nwn30eMeSmGMWhlPOtGQnQ4mR4RWWhcjb3RTCtEUXeYiLSJIA2mfO1550PKs5LtCmJEbBoKbx2du75CI5Df8F6VM1qSBfajwzXNSw1u86T4MlV39tgqTD1bBUWdFopSQRbpmFlpbUBDpPkBlXsD7VDgmAC60uLYgVcN3A7ofgZw8RL3uKt+cu0V06j6oRTU33GgJ0aKH8S42Acb0Sl4YyJUoWiAqMItE67FfrMSK0flJvvmDEihZwbTt8kt9eCNwp7ccwLDMGv59NKkWICWwPvlva0ZTOsCVmYdQ0Rav8M5CQHDc=
  - secure: ZQ+u7hDnPxHgrryP+niQAqX0iPjvA0nCUwpMu/mQ8OABYL3NlhopDmvU9eSa4HqyEMaCD0c7BIkkP/7Nn5tRn9ZIwZBCFqf7CsIlB4s2A17SPpd+NTvecSgsmnHeWy9LgqEMnm4a0wRZ7KVmn0oiKHiEQFx1Lx6Mi6yZ6EoXBmAonUmfsvYzHxd7qG3r/TSoquF1rgIf23FTCPXyCdpqj5Zie8DDk3gygDhVWQLGbhqaW0Eus5QcM7pYrDYdZacjwO1D0+mLn1N58iwSKmFiZkGICpBotFXmWtsWIh4mABh+Lf5/lK8ZtsD3e7ETKt+YQIUOK5J4PbD3PWUbD5mXVDBQWLnReKWP9qifcm94mVrhQeg8ZvytFKR65c3I4kf9zAOosvvoehD087cVxXTSfpOY/+canBchRu2qNY3LarsRZggtwMbH9q2Lc9RPqpAH7sLpVjMbNQ1QGWIvCoSjQSkq1Ek4nkmtElWBDKmIoq//7hdRZqyjaSqg5VmPDmeWmMSJ8tT0ZRxoxtOe/r6qku+9jtzx7lQ/N7yfqD83LxuHAo1BuXrExdxI065O29/l9NR3dN4JtOWylN0gjx2LKH0gYAAN/y66Pp+ZTE2NOsJG8OLJQUCWT8ycgvBpQLwFWM43X5B3FDGBQAzb5565XFuL4FTyDOvXsIfZBiPvaRo=
